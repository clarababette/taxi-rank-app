const c=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}};c();class d{constructor(i){this._routes=i}addPerson(){this._people++}removePerson(){this._people--}addTaxi(){this._taxis++;const i=new Date;this._activity=[`Taxi arrived @ ${i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,...this._activity]}updateQueue(){for(;Math.floor(this._people/11)>0&&this._taxis>0;){this._people-=11,this._taxis--;const s=new Date;this._activity=[`Taxi departed @ ${s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,...this._activity]}const i=this._routes.findIndex(s=>s.destination==this._destination);console.log(i),this._routes[i]={destination:this._destination,people:this._people,taxis:this._taxis,activity:this._activity}}get routes(){return this._routes}set queue(i){const s=this._routes.find(a=>a.destination==i);this._destination=s.destination,this._people=s.people,this._taxis=s.taxis,this._activity=s.activity}get queue(){return this.updateQueue(),{destination:this._destination,people:this._people,taxis:this._taxis,activity:this._activity}}}const l=[{destination:"Makhaza",people:12,taxis:0,activity:[]},{destination:"Belhar",people:34,taxis:0,activity:[]},{destination:"Bellville",people:23,taxis:0,activity:[]}],n=new d(l),u=n.routes.map(t=>`<tr id="${t.destination}">
    <td class="destination">${t.destination}</td>
    <td class="people"><button class="remove_person">-</button><span>${t.people}</span><button class="add_person">+</button></td>
    <td class="taxis"><span>${t.taxis}</span><button class="add_taxi">+</button></td>
    <td class="activity">${t.activity}</td>
  </tr>`),p=`<table class="queues">
                      <tr>
                        <th>Destination</th>
                        <th>Passenger Queue</th>
                        <th>Taxi Queue</th>
                        <th>Activity</th>
                       </tr>
                       ${u.join(" ")}
                    </table>`;document.querySelector("#app").innerHTML=p;const h=t=>{document.querySelector(`#${t.destination} .people span`).innerHTML=t.people,document.querySelector(`#${t.destination} .taxis span`).innerHTML=t.taxis,document.querySelector(`#${t.destination} .activity`).innerHTML=t.activity};document.querySelector(".queues").addEventListener("click",t=>{const i=t.target.parentNode.parentNode.id,s=t.target.classList[0];switch(n.queue=i,s){case"remove_person":n.removePerson();break;case"add_person":n.addPerson();break;case"add_taxi":n.addTaxi();break}console.log(n.queue),h(n.queue),console.log(n.routes)});
